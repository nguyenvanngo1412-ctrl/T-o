<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>truyentranhgay 18+</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#fff;
    color:#000;
    transition:0.3s;
}
.dark{
    background:#111;
    color:#fff;
}
header{
    background:#e91e63;
    padding:15px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    color:white;
}
button{
    padding:5px 10px;
    cursor:pointer;
}
.container{
    padding:20px;
}
.card{
    border:1px solid #ccc;
    padding:10px;
    margin-bottom:15px;
}
input, select, textarea{
    width:100%;
    padding:5px;
    margin:5px 0;
}
.hidden{
    display:none;
}
nav button{
    margin-right:5px;
}
.comment{
    border-top:1px solid #ccc;
    padding:5px;
}
</style>
</head>

<body>

<header>
    <h2>truyentranhgay 18+</h2>
    <div>
        <button onclick="toggleMode()">ğŸŒ™/â˜€</button>
        <button onclick="showLogin()">ÄÄƒng nháº­p</button>
        <button onclick="logout()">ÄÄƒng xuáº¥t</button>
    </div>
</header>

<div class="container">

<input type="text" id="search" placeholder="TÃ¬m truyá»‡n..." onkeyup="searchStory()">

<nav>
    <button onclick="filterType('all')">Táº¥t cáº£</button>
    <button onclick="filterType('text')">Truyá»‡n chá»¯</button>
    <button onclick="filterType('comic')">Truyá»‡n tranh</button>
    <button onclick="filterType('image')">áº¢nh tá»± do</button>
</nav>

<hr>

<h3>ÄÄƒng tÃ¡c pháº©m</h3>

<input id="title" placeholder="TiÃªu Ä‘á»">

<select id="type">
    <option value="text">Truyá»‡n chá»¯</option>
    <option value="comic">Truyá»‡n tranh</option>
    <option value="image">áº¢nh tá»± do</option>
</select>

<input id="genre" placeholder="Thá»ƒ loáº¡i">
<input id="country" placeholder="Quá»‘c gia">
<input id="language" placeholder="NgÃ´n ngá»¯">

<select id="translated">
    <option value="CÃ³ dá»‹ch">CÃ³ dá»‹ch</option>
    <option value="ChÆ°a dá»‹ch">ChÆ°a dá»‹ch</option>
</select>

<textarea id="content" placeholder="Ná»™i dung hoáº·c link áº£nh"></textarea>

<button onclick="addStory()">ÄÄƒng</button>

<hr>

<h3>Danh sÃ¡ch tÃ¡c pháº©m</h3>
<div id="storyList"></div>

</div>

<!-- Login -->
<div id="loginBox" class="hidden">
<div class="container">
    <h3>ÄÄƒng nháº­p</h3>
    <input id="nickname" placeholder="Biá»‡t danh">
    <button onclick="login()">XÃ¡c nháº­n</button>
</div>
</div>

<script>
let user=null;
let stories=[];

function toggleMode(){
    document.body.classList.toggle("dark");
}

function showLogin(){
    document.getElementById("loginBox").classList.toggle("hidden");
}

function login(){
    user=document.getElementById("nickname").value;
    alert("Xin chÃ o "+user);
    document.getElementById("loginBox").classList.add("hidden");
}

function logout(){
    user=null;
    alert("ÄÃ£ Ä‘Äƒng xuáº¥t");
}

function addStory(){
    if(!user){
        alert("Pháº£i Ä‘Äƒng nháº­p Ä‘á»ƒ Ä‘Äƒng truyá»‡n!");
        return;
    }

    let story={
        title:document.getElementById("title").value,
        type:document.getElementById("type").value,
        genre:document.getElementById("genre").value,
        country:document.getElementById("country").value,
        language:document.getElementById("language").value,
        translated:document.getElementById("translated").value,
        content:document.getElementById("content").value,
        author:user,
        comments:[]
    };

    stories.push(story);
    displayStories(stories);
}

function displayStories(list){
    let html="";
    list.forEach((s,i)=>{
        html+=`
        <div class="card">
            <h4>${s.title}</h4>
            <p><b>TÃ¡c giáº£:</b> ${s.author}</p>
            <p><b>Loáº¡i:</b> ${s.type}</p>
            <p><b>Thá»ƒ loáº¡i:</b> ${s.genre}</p>
            <p><b>Quá»‘c gia:</b> ${s.country}</p>
            <p><b>NgÃ´n ngá»¯:</b> ${s.language}</p>
            <p><b>Dá»‹ch:</b> ${s.translated}</p>
            <p>${s.content}</p>
            
            <h5>BÃ¬nh luáº­n</h5>
            ${s.comments.map(c=>`<div class="comment"><b>${c.user}:</b> ${c.text}</div>`).join("")}
            <input id="c${i}" placeholder="Viáº¿t bÃ¬nh luáº­n">
            <button onclick="addComment(${i})">Gá»­i</button>
        </div>
        `;
    });
    document.getElementById("storyList").innerHTML=html;
}

function addComment(index){
    if(!user){
        alert("Pháº£i Ä‘Äƒng nháº­p Ä‘á»ƒ bÃ¬nh luáº­n!");
        return;
    }
    let text=document.getElementById("c"+index).value;
    stories[index].comments.push({user:user,text:text});
    displayStories(stories);
}

function filterType(type){
    if(type==="all") displayStories(stories);
    else displayStories(stories.filter(s=>s.type===type));
}

function searchStory(){
    let value=document.getElementById("search").value.toLowerCase();
    displayStories(stories.filter(s=>s.title.toLowerCase().includes(value)));
}
</script>

</body>
</html>
